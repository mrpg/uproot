{% extends "Admin.html" %}

{% block title %}

<div class="d-flex justify-content-between">
    <span id="page-title">
        {% translate %}Session{% endtranslate %}
        <a href="../" class="font-monospace link-dark link-offset-2 link-underline-dark link-underline-opacity-25 link-underline-opacity-100-hover">{{ sname }}</a>
        <span class="fw-light text-secondary">&gt; {% translate %}Data{% endtranslate %}</span>
    </span>
    <div class="btn-group mb-2 mx-2" id="buttongroup-normal-table">
        <button type="button" class="btn btn-outline-uproot" onclick="refreshData()">{% translate %}Refresh{% endtranslate %}</button>
        <button type="button" class="btn btn-outline-uproot" onclick="fullScreenTable()">{% translate %}Full-screen table{% endtranslate %}</button>
    </div>
    <div id="buttons-normal-table">
        <a class="btn btn-uproot mb-2 me-2" href="../selectdata/">{% translate %}Download data{% endtranslate %}</a>
        <a class="btn btn-uproot mb-2" href="../monitor/">{% translate %}Monitor{% endtranslate %}</a>
    </div>
    <div class="btn-group d-none me-2" id="buttons-fullscreen-table">
        <button type="button" class="btn btn-outline-uproot btn-sm" onclick="refreshData()">{% translate %}Refresh{% endtranslate %}</button>
        <button type="button" class="btn btn-outline-uproot btn-sm" onclick="normalTable()">{% translate %}Normal table{% endtranslate %}</button>
    </div>
</div>

{% endblock title %}


{% block head %}

<style>
    #data-table {
        font-family: var(--bs-font-monospace);
        height: 100% !important;
    }
    #data-table input[type=search] {
        font-size: small !important;
        margin-top: 2px;
    }
    #data-table .tabulator-frozen-left {
        border: 0px;
    }
    #data-table .tabulator-row {
        background-color: white;
    }
    #data-table .tabulator-row:hover {
        background-color: #eeeeee;
    }
    /* Sticky column styling for Tabulator */
    .tabulator-col[aria-sort="ascending"] .tabulator-col-content, .tabulator-col[aria-sort="descending"] .tabulator-col-content {
        background-color: rgba(var(--bs-uproot-rgb), 0.25) !important;
    }
    .tabulator-cell[tabulator-field="id"], .tabulator-col[tabulator-field="id"] {
        color: var(--bs-uproot);
    }
    .tabulator-cell[tabulator-field="id"], .tabulator-cell[tabulator-field="label"], .tabulator-cell[tabulator-field="player"] {
        font-weight: bolder;
    }
    .tabulator-col-content {
        background-color: var(--bs-uproot-bg-light);
        border-bottom: 1px solid var(--bs-uproot-border-subtle);
        border-right: 1px dashed var(--bs-uproot-border-subtle);
    }
    .tabulator-header {
        border-bottom: 0px !important;
    }
    .h-fullscreen-title {
        height: 2.5vh;
    }
    .h-fullscreen-table {
        height: 94.5vh;
    }
    .start-fullscreen {
        left: 0.65vw;
    }
    .w-fullscreen {
        width: 98.7vw;
    }
</style>

{% endblock head %}


{% block main %}

<div class="mt-0 table-sticky-outer" id="tableContainer">
    <div class="container p-0" id="tableMain">
        <div class="border-bottom border-top border-uproot-subtle table-sticky-inner" id="tableOuter">
        </div>
    </div>
</div>

{% endblock main %}


{% block late %}

<script src="{{ internal_static('viewdata.js') }}"></script>
<script>
    uproot.onStart(() => initializeTable());
    function fullScreenTable() {
        I("uproot-footer").classList.add("d-none");
        I("uproot-navbar").classList.add("d-none");
        I("tableContainer").setAttribute("class", "position-absolute h-fullscreen-table start-fullscreen w-fullscreen");
        I("buttongroup-normal-table").classList.add("d-none");
        I("buttons-normal-table").classList.add("d-none");
        I("buttons-fullscreen-table").classList.remove("d-none");
        I("page-title").classList.add("fs-4");
        I("uproot-title").classList.add("h-fullscreen-title");
        I("uproot-title").classList.add("mt-3");
        I("uproot-title").classList.remove("my-4");
    }
    function normalTable() {
        I("uproot-footer").classList.remove("d-none");
        I("uproot-navbar").classList.remove("d-none");
        I("tableContainer").setAttribute("class", "mt-0 table-sticky-outer");
        I("tableOuter").classList.remove("mx-3");
        I("buttons-fullscreen-table").classList.add("d-none");
        I("buttongroup-normal-table").classList.remove("d-none");
        I("buttons-normal-table").classList.remove("d-none");
        I("page-title").classList.remove("fs-4");
        I("uproot-title").classList.remove("h-fullscreen-title");
        I("uproot-title").classList.remove("mt-3");
        I("uproot-title").classList.add("my-4");
    }
</script>

{% endblock late %}
